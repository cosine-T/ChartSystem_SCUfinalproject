# Chart System 测试用例列表

|                                 | 功能模块         | 测试点 / 目的                     | 前置条件                  | 输入数据 / 操作步骤                                          | 预期结果                                                     | **Pass?** |
| ------------------------------- | ---------------- | --------------------------------- | ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------- |
| **A 文件读取 & 导入**           |                  |                                   |                           |                                                              |                                                              |           |
| A-1                             | 打开 Bin         | 正常导入 2 通道 Bin               | 程序空白状态              | 单击 菜单 `文件→打开二进制`，选择 `sample_2ch.bin`，对话框输入 `2` 通道、`250` Hz | `ChartFrame` 出现 2 条波形，X 轴总点数=25 k；`InfoPanel` 显示文件名 & 通道数 | √         |
| A-2                             | 大文件导入       | 读取 > 100 MB Bin 不卡死          | 同 A-1                    | 选 `sample_4ch.bin`，4 通道、250 Hz                          | UI 3 s 内响应，波形可拖动；内存占用 ≤ 1.5 × 文件大小         | √         |
| A-3                             | 打开 EDF         | 支持 EDF 头解析                   | 程序空白                  | `文件→打开 EDF`，选 `sleep_8h.edf`                           | 通道数与 EDF 头一致；`InfoPanel` 显示病人/记录信息；时间轴长度≈ 8 h | √         |
| A-4                             | EDF 抽样         | 长记录自动降采样 ≤ 1 M samples/ch | 同 A-3                    | 滚动到末尾                                                   | 波形细节仍连续，无 UI 卡顿                                   | √         |
| A-5                             | 无效头检测       | 捕获异常弹框                      | 程序空白                  | 打开 `invalid_header.edf`                                    | 弹出“加载失败”对话框，内容含具体异常                         | √         |
| **B 多通道显示 & 导航**         |                  |                                   |                           |                                                              |                                                              |           |
| B-1                             | 多窗口叠加       | Bin+EDF 混合导入                  | 已载入 2 通道 Bin         | 再导入 `sleep_8h.edf`                                        | 通道面板数 = 原 2 + EDF 通道；顺序按导入先后                 | √         |
| B-2                             | 横向拖动         | 视窗拖拽滚动条                    | 已载入数据                | 拖动底部滚动条到中部                                         | 所有通道波形同步平移；`currentOffset` 更新                   | √         |
| B-3                             | Y 居中           | 单通道自动纵向复位                | 滚轮滚动任意通道垂直条    | 双击滑块上方 "自动V"                                         | 该通道 `yScale=1`，波形居中                                  | √         |
| B-4                             | 可见性切换       | 隐藏/显示通道                     | 随机选一通道              | 控制面板取消勾选，再勾选                                     | 波形即时隐藏/显示，无残影                                    | √         |
| **C 缩放**                      |                  |                                   |                           |                                                              |                                                              |           |
| C-1                             | 滑块缩放         | X-缩放滑块                        | 视窗默认 100 %            | 拖动到 500 %                                                 | `windowLength`≈20 % 原值；滚动条刻度同步                     | √         |
| C-2                             | 固定 1 h         | 一键窗口时长                      | 已载入 8 h EDF            | 点击 `1h` 按钮                                               | 视窗长度=1 h，X 刻度 hh:mm:ss                                | √         |
| C-3                             | 自动 X           | 全局自动缩放                      | 已在 C-2 状态             | 点 `自动X`                                                   | 视窗自动扩展至最长通道总长                                   | √         |
| **D 通道操作**                  |                  |                                   |                           |                                                              |                                                              |           |
| D-1                             | 导出 TXT         | 单通道文本导出                    | 任选通道                  | 控制面板点“导出”，默认 .txt                                  | 生成文件，行数=样本数，首行为数值                            | √         |
| D-2                             | 导出 BIN         | 导出二进制                        | 同上                      | 修改扩展名为 `.bin`                                          | 生成文件大小=4 × 样本数 Byte，小端 float                     | √         |
| D-3                             | 关闭通道         | 删除面板                          | 任选通道                  | 点击“关闭”                                                   | 面板列表减少 1，`DataModel.channels` 同步                    | √         |
| D-4                             | 上移/下移        | 通道排序保持                      | 任选中间通道              | 连续点“↑”“↓”                                                 | 面板顺序与控制面板一致                                       | √         |
| **E 统计 & 处理工具**           |                  |                                   |                           |                                                              |                                                              |           |
| E-1                             | 通道统计         | 多选统计对话框                    | 已载入 ≥2 通道            | `工具→统计`，选择两通道点“统计”                              | 弹窗列出 max/min/mean/var，每通道 4 行                       | √         |
| E-2                             | 无通道警告       | 统计空数据                        | 重启应用（无数据）        | `工具→统计`                                                  | 弹出“无可统计的通道”警告                                     | √         |
| E-3                             | 放大处理         | Amplify×2                         | 任选通道                  | `工具→处理` 选 "放大"，参数=2                                | 新生成通道均值≈原×2，命名含"_amp"                            | √         |
| E-4                             | 滑动平均         | 窗口=5                            | 同上                      | 选 "滑动平均"，窗口=5                                        | 新通道曲线平滑，长度不变                                     | √         |
| E-5                             | 阈值标注         | ≥90% 区段标红                     | SpO₂ 通道存在             | 选 "阈值标注"，阈=90，方向"≤"                                | 通道高亮列表增加区段；波形黄色叠加                           | √         |
| **F 心电监护仪 (MonitorFrame)** |                  |                                   |                           |                                                              |                                                              |           |
| F-1                             | 启动模拟         | 动态波形滚动                      | 主窗体                    | `视图→启动监护仪模拟`                                        | 新窗口 4 通道实时移动；FPS >30                               | √         |
| F-2                             | 暂停/播放        | Toggle 工作                       | MonitorFrame 打开         | 点击 ⏸ 按钮后 2 s                                            | 波形停止移动；再点 ▶ 继续                                    | √         |
| F-3                             | 实时统计         | HR/BP/SPO₂ 更新                   | 模拟运行                  | 观察 10 s                                                    | 左侧数值每 2 s 变化，HR 在 60-90                             | √         |
| F-4                             | 导出当前窗口     | TXT 导出窗口                      | 模拟播放中                | 点击“导出 TXT”，选当前窗口                                   | 文件行数≈窗口样本                                            | √         |
| **G 挑战 1 — 睡眠 EDF**         |                  |                                   |                           |                                                              |                                                              |           |
| G-1                             | 8 h→1 min 压缩   | 任意时长压缩                      | 已载入 8 h EDF            | 点击 `1m` 按钮                                               | 视窗长度=1 min；滚动条可到末尾                               | √         |
| G-2                             | 低 SPO₂ 区段标注 | 首次处理                          | 同上，处理工具可用        | 用 MarkOperation ≤90                                         | 低值区段呈黄色条带                                           | √         |
| **H 挑战 2 — 监护仪多通道模拟** |                  |                                   |                           |                                                              |                                                              |           |
| H-1                             | 4 波形同步       | ECG/BP/SpO₂/RESP 同步移动         | MonitorFrame              | 观察 30 s                                                    | 四条曲线速度一致，无跳帧                                     | √         |
| H-2                             | 自动扩容         | 缓冲区翻倍                        | 让模拟运行 3 min          | 内存增长可观测，GUI 不卡死                                   |                                                              | √         |
| **I 异常 & 边界**               |                  |                                   |                           |                                                              |                                                              |           |
| I-1                             | 非数字文本导入   | 按照字节读取，能导入              | 打开 Bin                  | 通道数输入 `abc`                                             | 能继续导入                                                   | √         |
| I-2                             | 0 通道           | 输入 0                            | 同上                      | 输入通道 0                                                   | 弹警告                                                       | √         |
| I-3                             | 缩放极限         | 10 × 放大                         | 视窗滑块拖到 10 00 % 上限 | 滚动条 unitIncrement ≥1；波形仍可拖                          |                                                              | √         |

